<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Bluenet: SwitchAggregator Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">
	DoxygenAwesomeDarkModeToggle.init()
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Bluenet
   &#160;<span id="projectnumber">5.7.0</span>
   </div>
   <div id="projectbrief">Bluenet, firmware for nRF52 smart home devices</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classSwitchAggregator.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classSwitchAggregator-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">SwitchAggregator Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Author: <a class="el" href="classCrownstone.html" title="Crownstone encapsulates all functionality, stack, services, and configuration.">Crownstone</a> Team Copyright: <a class="el" href="classCrownstone.html" title="Crownstone encapsulates all functionality, stack, services, and configuration.">Crownstone</a> (<a href="https://crownstone.rocks">https://crownstone.rocks</a>) Date: Sep 26, 2019 License: LGPLv3+, Apache License 2.0, and/or MIT (triple-licensed)  
 <a href="classSwitchAggregator.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="cs__SwitchAggregator_8h_source.html">cs_SwitchAggregator.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for SwitchAggregator:</div>
<div class="dyncontent">
<div class="center"><img src="classSwitchAggregator__inherit__graph.png" border="0" usemap="#aSwitchAggregator_inherit__map" alt="Inheritance graph"/></div>
<map name="aSwitchAggregator_inherit__map" id="aSwitchAggregator_inherit__map">
<area shape="rect" title="Author: Crownstone Team Copyright: Crownstone (https://crownstone.rocks) Date: Sep 26,..." alt="" coords="56,79,193,104"/>
<area shape="rect" href="classEventListener.html" title="Event listener." alt="" coords="5,5,116,31"/>
<area shape="rect" href="classComponent.html" title="Helper class to manage decoupling of components." alt="" coords="140,5,237,31"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for SwitchAggregator:</div>
<div class="dyncontent">
<div class="center"><img src="classSwitchAggregator__coll__graph.png" border="0" usemap="#aSwitchAggregator_coll__map" alt="Collaboration graph"/></div>
<map name="aSwitchAggregator_coll__map" id="aSwitchAggregator_coll__map">
<area shape="rect" title="Author: Crownstone Team Copyright: Crownstone (https://crownstone.rocks) Date: Sep 26,..." alt="" coords="1833,338,1971,363"/>
<area shape="rect" href="classEventListener.html" title="Event listener." alt="" coords="679,343,790,369"/>
<area shape="rect" href="classTwilightHandler.html" title=" " alt="" coords="1503,225,1625,250"/>
<area shape="rect" href="classBehaviourStore.html" title="Keeps track of the behaviours that are active on this crownstone." alt="" coords="1065,230,1188,255"/>
<area shape="rect" href="classBehaviourHandler.html" title=" " alt="" coords="1495,175,1633,201"/>
<area shape="rect" href="classPresenceHandler.html" title="Keeps up all the locations each profile is present in." alt="" coords="1061,153,1193,178"/>
<area shape="rect" href="classSmartSwitch.html" title="Class that:" alt="" coords="1512,479,1616,505"/>
<area shape="rect" href="classSafeSwitch.html" title="Class that takes care of safety of switch." alt="" coords="1079,559,1174,585"/>
<area shape="rect" href="classComponent.html" title="Helper class to manage decoupling of components." alt="" coords="686,85,783,110"/>
<area shape="rect" href="classStore.html" title=" " alt="" coords="644,138,825,193"/>
<area shape="rect" href="structPresenceHandler_1_1PresenceRecord.html" title=" " alt="" coords="337,145,536,185"/>
<area shape="rect" href="structPresenceHandler_1_1ProfileLocation.html" title=" " alt="" coords="5,145,188,185"/>
<area shape="rect" href="classDimmer.html" title="Class that provides a dimmer." alt="" coords="697,559,772,585"/>
<area shape="rect" href="classRelay.html" title="Class that provides a bi&#45;stable relay." alt="" coords="705,609,764,634"/>
<area shape="rect" href="unionswitch__state__t.html" title="Switch state: combination of relay and dimmer state." alt="" coords="677,683,793,709"/>
<area shape="rect" href="structcs__switch__history__item__t.html" title=" " alt="" coords="1033,695,1220,721"/>
<area shape="rect" title=" " alt="" coords="652,495,817,535"/>
<area shape="rect" title=" " alt="" coords="1049,444,1205,484"/>
<area shape="rect" href="structcmd__source__with__counter__t.html" title="Struct that tells where a command originated from." alt="" coords="1244,751,1447,777"/>
<area shape="rect" href="structcmd__source__t.html" title="Struct that tells where a command originated from." alt="" coords="679,753,791,778"/>
<area shape="rect" href="classCircularBuffer.html" title=" " alt="" coords="1471,559,1657,599"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aad1e6888f78eb1f4a65dd1ffb880b995"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#aad1e6888f78eb1f4a65dd1ffb880b995">SwitchAggregator</a> ()</td></tr>
<tr class="separator:aad1e6888f78eb1f4a65dd1ffb880b995"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f7e5254318fb1d509dcf9300730b516"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#a8f7e5254318fb1d509dcf9300730b516">init</a> (const <a class="el" href="structboards__config__t.html">boards_config_t</a> &amp;board)</td></tr>
<tr class="separator:a8f7e5254318fb1d509dcf9300730b516"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a624dc842b0863057264b7b1ba801c3f2"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#a624dc842b0863057264b7b1ba801c3f2">handleEvent</a> (<a class="el" href="classevent__t.html">event_t</a> &amp;evt) override</td></tr>
<tr class="memdesc:a624dc842b0863057264b7b1ba801c3f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">When swSwitch is locked, only CMD_SWITCH_LOCKED events will be handled.  <a href="classSwitchAggregator.html#a624dc842b0863057264b7b1ba801c3f2">More...</a><br /></td></tr>
<tr class="separator:a624dc842b0863057264b7b1ba801c3f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ca862d108f271bd7722434f4c65508e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#a9ca862d108f271bd7722434f4c65508e">switchPowered</a> ()</td></tr>
<tr class="memdesc:a9ca862d108f271bd7722434f4c65508e"><td class="mdescLeft">&#160;</td><td class="mdescRight">To be called when there is enough power to use the switch.  <a href="classSwitchAggregator.html#a9ca862d108f271bd7722434f4c65508e">More...</a><br /></td></tr>
<tr class="separator:a9ca862d108f271bd7722434f4c65508e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classEventListener"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classEventListener')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classEventListener.html">EventListener</a></td></tr>
<tr class="memitem:ac8cfe1097cbec18fac9313feccdb0e20 inherit pub_methods_classEventListener"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEventListener.html#ac8cfe1097cbec18fac9313feccdb0e20">EventListener</a> ()</td></tr>
<tr class="separator:ac8cfe1097cbec18fac9313feccdb0e20 inherit pub_methods_classEventListener"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad03c1e6f45e92434d502995a4f31685e inherit pub_methods_classEventListener"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEventListener.html#ad03c1e6f45e92434d502995a4f31685e">~EventListener</a> ()</td></tr>
<tr class="memdesc:ad03c1e6f45e92434d502995a4f31685e inherit pub_methods_classEventListener"><td class="mdescLeft">&#160;</td><td class="mdescRight">unregisters the listener.  <a href="classEventListener.html#ad03c1e6f45e92434d502995a4f31685e">More...</a><br /></td></tr>
<tr class="separator:ad03c1e6f45e92434d502995a4f31685e inherit pub_methods_classEventListener"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab746290fb9240d83d231cd390c3cafad inherit pub_methods_classEventListener"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEventListener.html#ab746290fb9240d83d231cd390c3cafad">handleEvent</a> (<a class="el" href="classevent__t.html">event_t</a> &amp;event)=0</td></tr>
<tr class="memdesc:ab746290fb9240d83d231cd390c3cafad inherit pub_methods_classEventListener"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle events.  <a href="classEventListener.html#ab746290fb9240d83d231cd390c3cafad">More...</a><br /></td></tr>
<tr class="separator:ab746290fb9240d83d231cd390c3cafad inherit pub_methods_classEventListener"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbdd4bec0525ca160c1b2aa5bf209cfe inherit pub_methods_classEventListener"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEventListener.html#adbdd4bec0525ca160c1b2aa5bf209cfe">listen</a> ()</td></tr>
<tr class="memdesc:adbdd4bec0525ca160c1b2aa5bf209cfe inherit pub_methods_classEventListener"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers this with the <a class="el" href="classEventDispatcher.html" title="Event dispatcher.">EventDispatcher</a>.  <a href="classEventListener.html#adbdd4bec0525ca160c1b2aa5bf209cfe">More...</a><br /></td></tr>
<tr class="separator:adbdd4bec0525ca160c1b2aa5bf209cfe inherit pub_methods_classEventListener"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classComponent"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classComponent')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classComponent.html">Component</a></td></tr>
<tr class="memitem:ab7c92af073ee6d4e4b7e8eeb71a8c4d8 inherit pub_methods_classComponent"><td class="memTemplParams" colspan="2">template&lt;class T &gt; </td></tr>
<tr class="memitem:ab7c92af073ee6d4e4b7e8eeb71a8c4d8 inherit pub_methods_classComponent"><td class="memTemplItemLeft" align="right" valign="top">T *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classComponent.html#ab7c92af073ee6d4e4b7e8eeb71a8c4d8">getComponent</a> (<a class="el" href="classComponent.html">Component</a> *requester=nullptr)</td></tr>
<tr class="memdesc:ab7c92af073ee6d4e4b7e8eeb71a8c4d8 inherit pub_methods_classComponent"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a component of type T* from _parent-&gt;children(), If not found try again with ancestors: _parent-&gt; ... -&gt;_parent-&gt;children().  <a href="classComponent.html#ab7c92af073ee6d4e4b7e8eeb71a8c4d8">More...</a><br /></td></tr>
<tr class="separator:ab7c92af073ee6d4e4b7e8eeb71a8c4d8 inherit pub_methods_classComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa51b4a1259d0c5f2c022d8afbb44f0bb inherit pub_methods_classComponent"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="cs__Typedefs_8h.html#ab09e5fe247ba3ab46e9e728c8499ecaf">cs_ret_code_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classComponent.html#aa51b4a1259d0c5f2c022d8afbb44f0bb">init</a> ()</td></tr>
<tr class="memdesc:aa51b4a1259d0c5f2c022d8afbb44f0bb inherit pub_methods_classComponent"><td class="mdescLeft">&#160;</td><td class="mdescRight">Components can implement this if they need to get references to sibling or if they need to do specific initialization.  <a href="classComponent.html#aa51b4a1259d0c5f2c022d8afbb44f0bb">More...</a><br /></td></tr>
<tr class="separator:aa51b4a1259d0c5f2c022d8afbb44f0bb inherit pub_methods_classComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cd21445768610fd3db1b15a9c851416 inherit pub_methods_classComponent"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classComponent.html#a9cd21445768610fd3db1b15a9c851416">parentAllChildren</a> ()</td></tr>
<tr class="memdesc:a9cd21445768610fd3db1b15a9c851416 inherit pub_methods_classComponent"><td class="mdescLeft">&#160;</td><td class="mdescRight">utility that loops over all elements of <a class="el" href="classComponent.html#a3ec59ae860e2dd270a8c076430df1321" title="Components with children can override this method to return them.">getChildren()</a> and setParent on the non-nullptr ones.  <a href="classComponent.html#a9cd21445768610fd3db1b15a9c851416">More...</a><br /></td></tr>
<tr class="separator:a9cd21445768610fd3db1b15a9c851416 inherit pub_methods_classComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad82d7393e339c1b19cc17a0d55b5674d inherit pub_methods_classComponent"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classComponent.html#ad82d7393e339c1b19cc17a0d55b5674d">~Component</a> ()=default</td></tr>
<tr class="separator:ad82d7393e339c1b19cc17a0d55b5674d inherit pub_methods_classComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a9c7101517b0f6f2f26d1581ddead6244"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classComponent.html">Component</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#a9c7101517b0f6f2f26d1581ddead6244">getChildren</a> () override</td></tr>
<tr class="memdesc:a9c7101517b0f6f2f26d1581ddead6244"><td class="mdescLeft">&#160;</td><td class="mdescRight">Components with children can override this method to return them.  <a href="classSwitchAggregator.html#a9c7101517b0f6f2f26d1581ddead6244">More...</a><br /></td></tr>
<tr class="separator:a9c7101517b0f6f2f26d1581ddead6244"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classComponent"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classComponent')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classComponent.html">Component</a></td></tr>
<tr class="memitem:a3ec59ae860e2dd270a8c076430df1321 inherit pro_methods_classComponent"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; <a class="el" href="classComponent.html">Component</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classComponent.html#a3ec59ae860e2dd270a8c076430df1321">getChildren</a> ()</td></tr>
<tr class="memdesc:a3ec59ae860e2dd270a8c076430df1321 inherit pro_methods_classComponent"><td class="mdescLeft">&#160;</td><td class="mdescRight">Components with children can override this method to return them.  <a href="classComponent.html#a3ec59ae860e2dd270a8c076430df1321">More...</a><br /></td></tr>
<tr class="separator:a3ec59ae860e2dd270a8c076430df1321 inherit pro_methods_classComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15dfa6d3ca6bfe46e46a53811235fdde inherit pro_methods_classComponent"><td class="memItemLeft" align="right" valign="top"><a class="el" href="cs__Typedefs_8h.html#ab09e5fe247ba3ab46e9e728c8499ecaf">cs_ret_code_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classComponent.html#a15dfa6d3ca6bfe46e46a53811235fdde">initChildren</a> ()</td></tr>
<tr class="separator:a15dfa6d3ca6bfe46e46a53811235fdde inherit pro_methods_classComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40f9568b0e447fb079e16dee8428e9f1 inherit pro_methods_classComponent"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classComponent.html#a40f9568b0e447fb079e16dee8428e9f1">setParent</a> (<a class="el" href="classComponent.html">Component</a> *p)</td></tr>
<tr class="memdesc:a40f9568b0e447fb079e16dee8428e9f1 inherit pro_methods_classComponent"><td class="mdescLeft">&#160;</td><td class="mdescRight">Children that are instantiated later can also be added individually.  <a href="classComponent.html#a40f9568b0e447fb079e16dee8428e9f1">More...</a><br /></td></tr>
<tr class="separator:a40f9568b0e447fb079e16dee8428e9f1 inherit pro_methods_classComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ae5f337046d7bdb58bcf9343eb6944602"><td class="memItemLeft" align="right" valign="top"><a class="el" href="cs__Typedefs_8h.html#ab09e5fe247ba3ab46e9e728c8499ecaf">cs_ret_code_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#ae5f337046d7bdb58bcf9343eb6944602">updateState</a> (bool allowOverrideReset, const <a class="el" href="structcmd__source__with__counter__t.html">cmd_source_with_counter_t</a> &amp;source)</td></tr>
<tr class="memdesc:ae5f337046d7bdb58bcf9343eb6944602"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks the behaviourState and overrideState, to set the swSwitch to the desired value:  <a href="classSwitchAggregator.html#ae5f337046d7bdb58bcf9343eb6944602">More...</a><br /></td></tr>
<tr class="separator:ae5f337046d7bdb58bcf9343eb6944602"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a531c476ff516a66f1baf2241c8ead68f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#a531c476ff516a66f1baf2241c8ead68f">updateBehaviourHandlers</a> ()</td></tr>
<tr class="memdesc:a531c476ff516a66f1baf2241c8ead68f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calls update on the behaviour handlers and returns true if after the update is allowed to reset the overrideState.  <a href="classSwitchAggregator.html#a531c476ff516a66f1baf2241c8ead68f">More...</a><br /></td></tr>
<tr class="separator:a531c476ff516a66f1baf2241c8ead68f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0964af05057eee1ff8ccb7b53bf7813f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#a0964af05057eee1ff8ccb7b53bf7813f">update</a> ()</td></tr>
<tr class="memdesc:a0964af05057eee1ff8ccb7b53bf7813f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates internal state and adjusts the switch values based on the new state.  <a href="classSwitchAggregator.html#a0964af05057eee1ff8ccb7b53bf7813f">More...</a><br /></td></tr>
<tr class="separator:a0964af05057eee1ff8ccb7b53bf7813f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afffab163ee944d8f9e1f245b67ea294c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#afffab163ee944d8f9e1f245b67ea294c">handleStateIntentionEvents</a> (<a class="el" href="classevent__t.html">event_t</a> &amp;evt)</td></tr>
<tr class="memdesc:afffab163ee944d8f9e1f245b67ea294c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Triggers an <a class="el" href="classSwitchAggregator.html#ae5f337046d7bdb58bcf9343eb6944602" title="Checks the behaviourState and overrideState, to set the swSwitch to the desired value:">updateState()</a> call on all handled events and adjusts at least one of behaviourState or overrideState.  <a href="classSwitchAggregator.html#afffab163ee944d8f9e1f245b67ea294c">More...</a><br /></td></tr>
<tr class="separator:afffab163ee944d8f9e1f245b67ea294c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0326dcaa2b05cc07b035e1cce1c80f87"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#a0326dcaa2b05cc07b035e1cce1c80f87">executeStateIntentionUpdate</a> (uint8_t value, <a class="el" href="structcmd__source__with__counter__t.html">cmd_source_with_counter_t</a> &amp;source)</td></tr>
<tr class="memdesc:a0326dcaa2b05cc07b035e1cce1c80f87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tries to update [overrideState] to [value] and then calls updateState(false).  <a href="classSwitchAggregator.html#a0326dcaa2b05cc07b035e1cce1c80f87">More...</a><br /></td></tr>
<tr class="separator:a0326dcaa2b05cc07b035e1cce1c80f87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e0b1e920ed8ab85a653640ddb601404"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#a0e0b1e920ed8ab85a653640ddb601404">registerSwitchcraftEvent</a> (uint8_t currentValue)</td></tr>
<tr class="memdesc:a0e0b1e920ed8ab85a653640ddb601404"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers a switchcraft event and checks if it's a double tap action.  <a href="classSwitchAggregator.html#a0e0b1e920ed8ab85a653640ddb601404">More...</a><br /></td></tr>
<tr class="separator:a0e0b1e920ed8ab85a653640ddb601404"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac44312661d39affb98b8e732c5a5d40"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#aac44312661d39affb98b8e732c5a5d40">getStateIntentionSwitchcraft</a> (uint8_t currentValue, bool doubleTap)</td></tr>
<tr class="memdesc:aac44312661d39affb98b8e732c5a5d40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the state intention from a switchcraft event.  <a href="classSwitchAggregator.html#aac44312661d39affb98b8e732c5a5d40">More...</a><br /></td></tr>
<tr class="separator:aac44312661d39affb98b8e732c5a5d40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45008134cf09a67796c2a37d078dfaa1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#a45008134cf09a67796c2a37d078dfaa1">handleTimingEvents</a> (<a class="el" href="classevent__t.html">event_t</a> &amp;evt)</td></tr>
<tr class="memdesc:a45008134cf09a67796c2a37d078dfaa1"><td class="mdescLeft">&#160;</td><td class="mdescRight">EVT_TICK, STATE_TIME and EVT_TIME_SET events possibly trigger a new aggregated state.  <a href="classSwitchAggregator.html#a45008134cf09a67796c2a37d078dfaa1">More...</a><br /></td></tr>
<tr class="separator:a45008134cf09a67796c2a37d078dfaa1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01c0260581c16737738b58a6f33b371d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#a01c0260581c16737738b58a6f33b371d">handlePresenceEvents</a> (<a class="el" href="classevent__t.html">event_t</a> &amp;evt)</td></tr>
<tr class="memdesc:a01c0260581c16737738b58a6f33b371d"><td class="mdescLeft">&#160;</td><td class="mdescRight">EVT_PRESENCE_MUTATION.  <a href="classSwitchAggregator.html#a01c0260581c16737738b58a6f33b371d">More...</a><br /></td></tr>
<tr class="separator:a01c0260581c16737738b58a6f33b371d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2d773ac9ede08bc8e0789c03015a189"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#ad2d773ac9ede08bc8e0789c03015a189">handleSwitchAggregatorCommand</a> (<a class="el" href="classevent__t.html">event_t</a> &amp;evt)</td></tr>
<tr class="memdesc:ad2d773ac9ede08bc8e0789c03015a189"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clearing private variables, setting them to specific values, etc.  <a href="classSwitchAggregator.html#ad2d773ac9ede08bc8e0789c03015a189">More...</a><br /></td></tr>
<tr class="separator:ad2d773ac9ede08bc8e0789c03015a189"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0255ab3e61f70b6fa2b63e8b72f8d2e1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#a0255ab3e61f70b6fa2b63e8b72f8d2e1">handleBehaviourEvents</a> (<a class="el" href="classevent__t.html">event_t</a> &amp;evt)</td></tr>
<tr class="memdesc:a0255ab3e61f70b6fa2b63e8b72f8d2e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the following events:  <a href="classSwitchAggregator.html#a0255ab3e61f70b6fa2b63e8b72f8d2e1">More...</a><br /></td></tr>
<tr class="separator:a0255ab3e61f70b6fa2b63e8b72f8d2e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af325669fd2b489d159b18eb4e321af77"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#af325669fd2b489d159b18eb4e321af77">handleSwitchStateChange</a> (uint8_t newIntensity)</td></tr>
<tr class="separator:af325669fd2b489d159b18eb4e321af77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa12d86338fd3870bac4746a5fd994892"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#aa12d86338fd3870bac4746a5fd994892">aggregatedBehaviourIntensity</a> ()</td></tr>
<tr class="memdesc:aa12d86338fd3870bac4746a5fd994892"><td class="mdescLeft">&#160;</td><td class="mdescRight">Aggregates the value of twilightHandler and behaviourHandler into a single intensity value.  <a href="classSwitchAggregator.html#aa12d86338fd3870bac4746a5fd994892">More...</a><br /></td></tr>
<tr class="separator:aa12d86338fd3870bac4746a5fd994892"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b190240b2f962ca516c8634accee934"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#a4b190240b2f962ca516c8634accee934">resolveOverrideState</a> (uint8_t overrideState)</td></tr>
<tr class="memdesc:a4b190240b2f962ca516c8634accee934"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the switch state that should be set according to the override state.  <a href="classSwitchAggregator.html#a4b190240b2f962ca516c8634accee934">More...</a><br /></td></tr>
<tr class="separator:a4b190240b2f962ca516c8634accee934"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cf72b6a1dc069d1b2deea18bc085bda"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#a4cf72b6a1dc069d1b2deea18bc085bda">checkAndSetOwner</a> (const <a class="el" href="structcmd__source__with__counter__t.html">cmd_source_with_counter_t</a> &amp;source)</td></tr>
<tr class="memdesc:a4cf72b6a1dc069d1b2deea18bc085bda"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tries to set source as owner of the switch.  <a href="classSwitchAggregator.html#a4cf72b6a1dc069d1b2deea18bc085bda">More...</a><br /></td></tr>
<tr class="separator:a4cf72b6a1dc069d1b2deea18bc085bda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada8a27d498810fc48ce3b068ecd7b94d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#ada8a27d498810fc48ce3b068ecd7b94d">handleGetBehaviourDebug</a> (<a class="el" href="classevent__t.html">event_t</a> &amp;evt)</td></tr>
<tr class="separator:ada8a27d498810fc48ce3b068ecd7b94d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae44aafbd3827b829bcfeec80e064f205"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#ae44aafbd3827b829bcfeec80e064f205">addToSwitchHistory</a> (const <a class="el" href="structcs__switch__history__item__t.html">cs_switch_history_item_t</a> &amp;cmd)</td></tr>
<tr class="separator:ae44aafbd3827b829bcfeec80e064f205"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad28e381230099e72c7602a1d9303408a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#ad28e381230099e72c7602a1d9303408a">printSwitchHistory</a> ()</td></tr>
<tr class="separator:ad28e381230099e72c7602a1d9303408a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40a8c3d9b48c9cb89578fa83f95e1ed0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#a40a8c3d9b48c9cb89578fa83f95e1ed0">printStates</a> (uint32_t lineNumber)</td></tr>
<tr class="separator:a40a8c3d9b48c9cb89578fa83f95e1ed0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae65cf14a05a396fd9b74c77704385ea3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#ae65cf14a05a396fd9b74c77704385ea3">pushTestDataToHost</a> ()</td></tr>
<tr class="separator:ae65cf14a05a396fd9b74c77704385ea3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a0ffd9887b9d98c4d7f3484e634dfd352"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classTwilightHandler.html">TwilightHandler</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#a0ffd9887b9d98c4d7f3484e634dfd352">_twilightHandler</a></td></tr>
<tr class="separator:a0ffd9887b9d98c4d7f3484e634dfd352"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc1f3eaa8e517cebca6a813d86673dc6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classBehaviourHandler.html">BehaviourHandler</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#adc1f3eaa8e517cebca6a813d86673dc6">_behaviourHandler</a></td></tr>
<tr class="separator:adc1f3eaa8e517cebca6a813d86673dc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7935cefb8be7c2afa6153015dedfaa18"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classBehaviourStore.html">BehaviourStore</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#a7935cefb8be7c2afa6153015dedfaa18">_behaviourStore</a></td></tr>
<tr class="separator:a7935cefb8be7c2afa6153015dedfaa18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d008e09cb42b605e06e9de820102ed4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSmartSwitch.html">SmartSwitch</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#a5d008e09cb42b605e06e9de820102ed4">_smartSwitch</a></td></tr>
<tr class="separator:a5d008e09cb42b605e06e9de820102ed4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b91707a8cf8468e002d7cce54193a5c"><td class="memItemLeft" align="right" valign="top">std::optional&lt; uint8_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#a2b91707a8cf8468e002d7cce54193a5c">_overrideState</a> = {}</td></tr>
<tr class="separator:a2b91707a8cf8468e002d7cce54193a5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a54174a89d101655e1abd2272070504"><td class="memItemLeft" align="right" valign="top">std::optional&lt; uint8_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#a4a54174a89d101655e1abd2272070504">_behaviourState</a> = {}</td></tr>
<tr class="separator:a4a54174a89d101655e1abd2272070504"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac12efacb742b69e63c135fa960d8bd86"><td class="memItemLeft" align="right" valign="top">std::optional&lt; uint8_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#ac12efacb742b69e63c135fa960d8bd86">_twilightState</a> = {}</td></tr>
<tr class="separator:ac12efacb742b69e63c135fa960d8bd86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39efd6656baafd08900f8489e62f1610"><td class="memItemLeft" align="right" valign="top">std::optional&lt; uint8_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#a39efd6656baafd08900f8489e62f1610">_aggregatedState</a> = {}</td></tr>
<tr class="separator:a39efd6656baafd08900f8489e62f1610"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02ea9826e90387d6d90cb22e513b41bc"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#a02ea9826e90387d6d90cb22e513b41bc">_lastTimestamp</a> = 0</td></tr>
<tr class="separator:a02ea9826e90387d6d90cb22e513b41bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8380d0548153be64977568bbd0a58e56"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#a8380d0548153be64977568bbd0a58e56">_switchcraftDoubleTapCountdown</a> = 0</td></tr>
<tr class="memdesc:a8380d0548153be64977568bbd0a58e56"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set on switchcraft event, then decremented each tick event until 0.  <a href="classSwitchAggregator.html#a8380d0548153be64977568bbd0a58e56">More...</a><br /></td></tr>
<tr class="separator:a8380d0548153be64977568bbd0a58e56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca5ab07a82bb0b4659e419af1dddc983"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#aca5ab07a82bb0b4659e419af1dddc983">_lastSwitchcraftOnValue</a> = 0</td></tr>
<tr class="memdesc:aca5ab07a82bb0b4659e419af1dddc983"><td class="mdescLeft">&#160;</td><td class="mdescRight">Keeps up the switch value (1-100 from smart switch) of the last time it was on, before being turned off by switchcraft.  <a href="classSwitchAggregator.html#aca5ab07a82bb0b4659e419af1dddc983">More...</a><br /></td></tr>
<tr class="separator:aca5ab07a82bb0b4659e419af1dddc983"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15da1b9963d7617fbf4b4b961956c283"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcmd__source__with__counter__t.html">cmd_source_with_counter_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#a15da1b9963d7617fbf4b4b961956c283">_source</a> = <a class="el" href="structcmd__source__with__counter__t.html">cmd_source_with_counter_t</a>(<a class="el" href="cs__CmdSource_8h.html#af00ba4a657b9534acc5fff08ed4f9bd1a86bf56a53d7bc433160425b08bdcb515">CS_CMD_SOURCE_NONE</a>)</td></tr>
<tr class="memdesc:a15da1b9963d7617fbf4b4b961956c283"><td class="mdescLeft">&#160;</td><td class="mdescRight">Which source claimed the switch.  <a href="classSwitchAggregator.html#a15da1b9963d7617fbf4b4b961956c283">More...</a><br /></td></tr>
<tr class="separator:a15da1b9963d7617fbf4b4b961956c283"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d9a725228daf5c348af5b78adb71baa"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#a8d9a725228daf5c348af5b78adb71baa">_ownerTimeoutCountdown</a> = 0</td></tr>
<tr class="separator:a8d9a725228daf5c348af5b78adb71baa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a469f51068ca21307b6e9657c7af3f446"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classCircularBuffer.html">CircularBuffer</a>&lt; <a class="el" href="structcs__switch__history__item__t.html">cs_switch_history_item_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#a469f51068ca21307b6e9657c7af3f446">_switchHistory</a></td></tr>
<tr class="memdesc:a469f51068ca21307b6e9657c7af3f446"><td class="mdescLeft">&#160;</td><td class="mdescRight">Keep up a history of switch commands.  <a href="classSwitchAggregator.html#a469f51068ca21307b6e9657c7af3f446">More...</a><br /></td></tr>
<tr class="separator:a469f51068ca21307b6e9657c7af3f446"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-static-attribs" name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a47b0176002904cdb93eb0b4b0e6e104a"><td class="memItemLeft" align="right" valign="top">static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#a47b0176002904cdb93eb0b4b0e6e104a">_maxSwitchHistoryItems</a> = 10</td></tr>
<tr class="separator:a47b0176002904cdb93eb0b4b0e6e104a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="friends" name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a645666503eace2af3b2cddc5e3ed980f"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSwitchAggregator.html#a645666503eace2af3b2cddc5e3ed980f">TestAccess&lt; SwitchAggregator &gt;</a></td></tr>
<tr class="separator:a645666503eace2af3b2cddc5e3ed980f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Author: <a class="el" href="classCrownstone.html" title="Crownstone encapsulates all functionality, stack, services, and configuration.">Crownstone</a> Team Copyright: <a class="el" href="classCrownstone.html" title="Crownstone encapsulates all functionality, stack, services, and configuration.">Crownstone</a> (<a href="https://crownstone.rocks">https://crownstone.rocks</a>) Date: Sep 26, 2019 License: LGPLv3+, Apache License 2.0, and/or MIT (triple-licensed) </p>
<p >Handler that aggregates events related to switching such as SwitchCraft, Behaviours, Twilight and App/User side actions. Based on the incoming data this object decides what state to set the <a class="el" href="classSmartSwitch.html" title="Class that:">SmartSwitch</a> to. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aad1e6888f78eb1f4a65dd1ffb880b995" name="aad1e6888f78eb1f4a65dd1ffb880b995"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad1e6888f78eb1f4a65dd1ffb880b995">&#9670;&#160;</a></span>SwitchAggregator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSwitchAggregator.html">SwitchAggregator::SwitchAggregator</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ae44aafbd3827b829bcfeec80e064f205" name="ae44aafbd3827b829bcfeec80e064f205"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae44aafbd3827b829bcfeec80e064f205">&#9670;&#160;</a></span>addToSwitchHistory()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SwitchAggregator::addToSwitchHistory </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcs__switch__history__item__t.html">cs_switch_history_item_t</a> &amp;&#160;</td>
          <td class="paramname"><em>cmd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aa12d86338fd3870bac4746a5fd994892" name="aa12d86338fd3870bac4746a5fd994892"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa12d86338fd3870bac4746a5fd994892">&#9670;&#160;</a></span>aggregatedBehaviourIntensity()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t SwitchAggregator::aggregatedBehaviourIntensity </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Aggregates the value of twilightHandler and behaviourHandler into a single intensity value. </p>
<p >This will return the minimum of the respective handler values when both are defined, otherwise return the value of the one that is defined, otherwise 100. </p>

</div>
</div>
<a id="a4cf72b6a1dc069d1b2deea18bc085bda" name="a4cf72b6a1dc069d1b2deea18bc085bda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cf72b6a1dc069d1b2deea18bc085bda">&#9670;&#160;</a></span>checkAndSetOwner()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SwitchAggregator::checkAndSetOwner </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcmd__source__with__counter__t.html">cmd_source_with_counter_t</a> &amp;&#160;</td>
          <td class="paramname"><em>source</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tries to set source as owner of the switch. </p>
<p >Returns true on success, false if switch is already owned by a different source, and given source does not overrule it. </p>

</div>
</div>
<a id="a0326dcaa2b05cc07b035e1cce1c80f87" name="a0326dcaa2b05cc07b035e1cce1c80f87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0326dcaa2b05cc07b035e1cce1c80f87">&#9670;&#160;</a></span>executeStateIntentionUpdate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SwitchAggregator::executeStateIntentionUpdate </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcmd__source__with__counter__t.html">cmd_source_with_counter_t</a> &amp;&#160;</td>
          <td class="paramname"><em>source</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tries to update [overrideState] to [value] and then calls updateState(false). </p>
<p >If smartswitch disallows this operation at the end of updateState, revert back [overrideState] to the value it had before this function call. </p>

</div>
</div>
<a id="a9c7101517b0f6f2f26d1581ddead6244" name="a9c7101517b0f6f2f26d1581ddead6244"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c7101517b0f6f2f26d1581ddead6244">&#9670;&#160;</a></span>getChildren()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="classComponent.html">Component</a> * &gt; SwitchAggregator::getChildren </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Components with children can override this method to return them. </p>
<p >This is used by getComponent&lt;&gt; to search for available components. </p>

<p>Reimplemented from <a class="el" href="classComponent.html#a3ec59ae860e2dd270a8c076430df1321">Component</a>.</p>

</div>
</div>
<a id="aac44312661d39affb98b8e732c5a5d40" name="aac44312661d39affb98b8e732c5a5d40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac44312661d39affb98b8e732c5a5d40">&#9670;&#160;</a></span>getStateIntentionSwitchcraft()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t SwitchAggregator::getStateIntentionSwitchcraft </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>currentValue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>doubleTap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the state intention from a switchcraft event. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">currentValue</td><td>The current switch state (0-100 from smart switch). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">doubleTap</td><td>Whether the switchcraft event was a double tap.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The switch value to be set. </dd></dl>

</div>
</div>
<a id="a0255ab3e61f70b6fa2b63e8b72f8d2e1" name="a0255ab3e61f70b6fa2b63e8b72f8d2e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0255ab3e61f70b6fa2b63e8b72f8d2e1">&#9670;&#160;</a></span>handleBehaviourEvents()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SwitchAggregator::handleBehaviourEvents </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classevent__t.html">event_t</a> &amp;&#160;</td>
          <td class="paramname"><em>evt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles the following events: </p>
<ul>
<li>CMD_GET_BEHAVIOUR_DEBUG: Fills in the current state of the <a class="el" href="classSwitchAggregator.html" title="Author: Crownstone Team Copyright: Crownstone (https://crownstone.rocks) Date: Sep 26,...">SwitchAggregator</a> as response to a query from host.</li>
<li>EVT_BEHAVIOURSTORE_MUTATION: If mutation is of type Add or Update, checks if the changed behaviour. If it was active, the override will be reset in order to show a user the effect of its change. </li>
</ul>

</div>
</div>
<a id="a624dc842b0863057264b7b1ba801c3f2" name="a624dc842b0863057264b7b1ba801c3f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a624dc842b0863057264b7b1ba801c3f2">&#9670;&#160;</a></span>handleEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void SwitchAggregator::handleEvent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classevent__t.html">event_t</a> &amp;&#160;</td>
          <td class="paramname"><em>evt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>When swSwitch is locked, only CMD_SWITCH_LOCKED events will be handled. </p>
<p >Else events may alter the intended states and subsequently trigger an actual state change. </p>

<p>Implements <a class="el" href="classEventListener.html#ab746290fb9240d83d231cd390c3cafad">EventListener</a>.</p>

</div>
</div>
<a id="ada8a27d498810fc48ce3b068ecd7b94d" name="ada8a27d498810fc48ce3b068ecd7b94d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada8a27d498810fc48ce3b068ecd7b94d">&#9670;&#160;</a></span>handleGetBehaviourDebug()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SwitchAggregator::handleGetBehaviourDebug </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classevent__t.html">event_t</a> &amp;&#160;</td>
          <td class="paramname"><em>evt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a01c0260581c16737738b58a6f33b371d" name="a01c0260581c16737738b58a6f33b371d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01c0260581c16737738b58a6f33b371d">&#9670;&#160;</a></span>handlePresenceEvents()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SwitchAggregator::handlePresenceEvents </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classevent__t.html">event_t</a> &amp;&#160;</td>
          <td class="paramname"><em>evt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>EVT_PRESENCE_MUTATION. </p>
<p >returns true when the event should be considered 'consumed'. (which is when evt is of one of these types.) </p>

</div>
</div>
<a id="afffab163ee944d8f9e1f245b67ea294c" name="afffab163ee944d8f9e1f245b67ea294c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afffab163ee944d8f9e1f245b67ea294c">&#9670;&#160;</a></span>handleStateIntentionEvents()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SwitchAggregator::handleStateIntentionEvents </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classevent__t.html">event_t</a> &amp;&#160;</td>
          <td class="paramname"><em>evt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Triggers an <a class="el" href="classSwitchAggregator.html#ae5f337046d7bdb58bcf9343eb6944602" title="Checks the behaviourState and overrideState, to set the swSwitch to the desired value:">updateState()</a> call on all handled events and adjusts at least one of behaviourState or overrideState. </p>

</div>
</div>
<a id="ad2d773ac9ede08bc8e0789c03015a189" name="ad2d773ac9ede08bc8e0789c03015a189"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2d773ac9ede08bc8e0789c03015a189">&#9670;&#160;</a></span>handleSwitchAggregatorCommand()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SwitchAggregator::handleSwitchAggregatorCommand </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classevent__t.html">event_t</a> &amp;&#160;</td>
          <td class="paramname"><em>evt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clearing private variables, setting them to specific values, etc. </p>
<p >Debug or power user features. </p>

</div>
</div>
<a id="af325669fd2b489d159b18eb4e321af77" name="af325669fd2b489d159b18eb4e321af77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af325669fd2b489d159b18eb4e321af77">&#9670;&#160;</a></span>handleSwitchStateChange()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SwitchAggregator::handleSwitchStateChange </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>newIntensity</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a45008134cf09a67796c2a37d078dfaa1" name="a45008134cf09a67796c2a37d078dfaa1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45008134cf09a67796c2a37d078dfaa1">&#9670;&#160;</a></span>handleTimingEvents()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SwitchAggregator::handleTimingEvents </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classevent__t.html">event_t</a> &amp;&#160;</td>
          <td class="paramname"><em>evt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>EVT_TICK, STATE_TIME and EVT_TIME_SET events possibly trigger a new aggregated state. </p>
<p >This handling function takes care of that.</p>
<p >returns true when the event should be considered 'consumed'. (which is when evt is of one of these types.) </p>

</div>
</div>
<a id="a8f7e5254318fb1d509dcf9300730b516" name="a8f7e5254318fb1d509dcf9300730b516"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f7e5254318fb1d509dcf9300730b516">&#9670;&#160;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SwitchAggregator::init </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structboards__config__t.html">boards_config_t</a> &amp;&#160;</td>
          <td class="paramname"><em>board</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a40a8c3d9b48c9cb89578fa83f95e1ed0" name="a40a8c3d9b48c9cb89578fa83f95e1ed0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40a8c3d9b48c9cb89578fa83f95e1ed0">&#9670;&#160;</a></span>printStates()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SwitchAggregator::printStates </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>lineNumber</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ad28e381230099e72c7602a1d9303408a" name="ad28e381230099e72c7602a1d9303408a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad28e381230099e72c7602a1d9303408a">&#9670;&#160;</a></span>printSwitchHistory()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SwitchAggregator::printSwitchHistory </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ae65cf14a05a396fd9b74c77704385ea3" name="ae65cf14a05a396fd9b74c77704385ea3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae65cf14a05a396fd9b74c77704385ea3">&#9670;&#160;</a></span>pushTestDataToHost()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SwitchAggregator::pushTestDataToHost </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a0e0b1e920ed8ab85a653640ddb601404" name="a0e0b1e920ed8ab85a653640ddb601404"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e0b1e920ed8ab85a653640ddb601404">&#9670;&#160;</a></span>registerSwitchcraftEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SwitchAggregator::registerSwitchcraftEvent </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>currentValue</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Registers a switchcraft event and checks if it's a double tap action. </p>
<p >Sets _lastSwitchcraftOnValue and _switchcraftDoubleTapCountdown.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">currentValue</td><td>The current switch value.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true When this event is a double tap. </dd></dl>

</div>
</div>
<a id="a4b190240b2f962ca516c8634accee934" name="a4b190240b2f962ca516c8634accee934"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b190240b2f962ca516c8634accee934">&#9670;&#160;</a></span>resolveOverrideState()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t SwitchAggregator::resolveOverrideState </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>overrideState</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the switch state that should be set according to the override state. </p>
<p >When override state is the special value 'smart on' it should be interpreted according to the values of twilightHandler and behaviourHandler. This getter centralizes that. </p>

</div>
</div>
<a id="a9ca862d108f271bd7722434f4c65508e" name="a9ca862d108f271bd7722434f4c65508e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ca862d108f271bd7722434f4c65508e">&#9670;&#160;</a></span>switchPowered()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SwitchAggregator::switchPowered </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>To be called when there is enough power to use the switch. </p>

</div>
</div>
<a id="a0964af05057eee1ff8ccb7b53bf7813f" name="a0964af05057eee1ff8ccb7b53bf7813f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0964af05057eee1ff8ccb7b53bf7813f">&#9670;&#160;</a></span>update()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SwitchAggregator::update </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Updates internal state and adjusts the switch values based on the new state. </p>
<p >Also keeps switchHistory up to date. </p>

</div>
</div>
<a id="a531c476ff516a66f1baf2241c8ead68f" name="a531c476ff516a66f1baf2241c8ead68f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a531c476ff516a66f1baf2241c8ead68f">&#9670;&#160;</a></span>updateBehaviourHandlers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SwitchAggregator::updateBehaviourHandlers </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calls update on the behaviour handlers and returns true if after the update is allowed to reset the overrideState. </p>
<p >Returns true when behaviour value changed since last time it was called. </p>

</div>
</div>
<a id="ae5f337046d7bdb58bcf9343eb6944602" name="ae5f337046d7bdb58bcf9343eb6944602"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5f337046d7bdb58bcf9343eb6944602">&#9670;&#160;</a></span>updateState()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cs__Typedefs_8h.html#ab09e5fe247ba3ab46e9e728c8499ecaf">cs_ret_code_t</a> SwitchAggregator::updateState </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>allowOverrideReset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcmd__source__with__counter__t.html">cmd_source_with_counter_t</a> &amp;&#160;</td>
          <td class="paramname"><em>source</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks the behaviourState and overrideState, to set the swSwitch to the desired value: </p>
<ul>
<li>if swSwitch doesn't allow switching, nothing happens, else,</li>
<li>when overrideState has a value, swSwitch is set to that value, else,</li>
<li>when behaviourState has a value, swSwitch is set to that value, else,</li>
<li>nothing happens.</li>
</ul>
<p >This method will clear the overrideState when it matches the behaviourState, unless the switch is locked or allowOverrideReset is false.</p>
<p >(Disallowing override state to reset is used for commands that want to change the value and trigger a reset which are not initated through behaviour handlers) </p>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a id="a645666503eace2af3b2cddc5e3ed980f" name="a645666503eace2af3b2cddc5e3ed980f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a645666503eace2af3b2cddc5e3ed980f">&#9670;&#160;</a></span>TestAccess&lt; SwitchAggregator &gt;</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classTestAccess.html">TestAccess</a>&lt; <a class="el" href="classSwitchAggregator.html">SwitchAggregator</a> &gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a39efd6656baafd08900f8489e62f1610" name="a39efd6656baafd08900f8489e62f1610"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39efd6656baafd08900f8489e62f1610">&#9670;&#160;</a></span>_aggregatedState</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::optional&lt;uint8_t&gt; SwitchAggregator::_aggregatedState = {}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="adc1f3eaa8e517cebca6a813d86673dc6" name="adc1f3eaa8e517cebca6a813d86673dc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc1f3eaa8e517cebca6a813d86673dc6">&#9670;&#160;</a></span>_behaviourHandler</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classBehaviourHandler.html">BehaviourHandler</a> SwitchAggregator::_behaviourHandler</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a4a54174a89d101655e1abd2272070504" name="a4a54174a89d101655e1abd2272070504"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a54174a89d101655e1abd2272070504">&#9670;&#160;</a></span>_behaviourState</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::optional&lt;uint8_t&gt; SwitchAggregator::_behaviourState = {}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a7935cefb8be7c2afa6153015dedfaa18" name="a7935cefb8be7c2afa6153015dedfaa18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7935cefb8be7c2afa6153015dedfaa18">&#9670;&#160;</a></span>_behaviourStore</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classBehaviourStore.html">BehaviourStore</a>* SwitchAggregator::_behaviourStore</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aca5ab07a82bb0b4659e419af1dddc983" name="aca5ab07a82bb0b4659e419af1dddc983"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca5ab07a82bb0b4659e419af1dddc983">&#9670;&#160;</a></span>_lastSwitchcraftOnValue</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t SwitchAggregator::_lastSwitchcraftOnValue = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Keeps up the switch value (1-100 from smart switch) of the last time it was on, before being turned off by switchcraft. </p>

</div>
</div>
<a id="a02ea9826e90387d6d90cb22e513b41bc" name="a02ea9826e90387d6d90cb22e513b41bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02ea9826e90387d6d90cb22e513b41bc">&#9670;&#160;</a></span>_lastTimestamp</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t SwitchAggregator::_lastTimestamp = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a47b0176002904cdb93eb0b4b0e6e104a" name="a47b0176002904cdb93eb0b4b0e6e104a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47b0176002904cdb93eb0b4b0e6e104a">&#9670;&#160;</a></span>_maxSwitchHistoryItems</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t SwitchAggregator::_maxSwitchHistoryItems = 10</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a2b91707a8cf8468e002d7cce54193a5c" name="a2b91707a8cf8468e002d7cce54193a5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b91707a8cf8468e002d7cce54193a5c">&#9670;&#160;</a></span>_overrideState</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::optional&lt;uint8_t&gt; SwitchAggregator::_overrideState = {}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a8d9a725228daf5c348af5b78adb71baa" name="a8d9a725228daf5c348af5b78adb71baa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d9a725228daf5c348af5b78adb71baa">&#9670;&#160;</a></span>_ownerTimeoutCountdown</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t SwitchAggregator::_ownerTimeoutCountdown = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a5d008e09cb42b605e06e9de820102ed4" name="a5d008e09cb42b605e06e9de820102ed4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d008e09cb42b605e06e9de820102ed4">&#9670;&#160;</a></span>_smartSwitch</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSmartSwitch.html">SmartSwitch</a> SwitchAggregator::_smartSwitch</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a15da1b9963d7617fbf4b4b961956c283" name="a15da1b9963d7617fbf4b4b961956c283"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15da1b9963d7617fbf4b4b961956c283">&#9670;&#160;</a></span>_source</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcmd__source__with__counter__t.html">cmd_source_with_counter_t</a> SwitchAggregator::_source = <a class="el" href="structcmd__source__with__counter__t.html">cmd_source_with_counter_t</a>(<a class="el" href="cs__CmdSource_8h.html#af00ba4a657b9534acc5fff08ed4f9bd1a86bf56a53d7bc433160425b08bdcb515">CS_CMD_SOURCE_NONE</a>)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Which source claimed the switch. </p>
<p >Until timeout, nothing with a different source can set the switch. Unless that source overrules the current source. </p>

</div>
</div>
<a id="a8380d0548153be64977568bbd0a58e56" name="a8380d0548153be64977568bbd0a58e56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8380d0548153be64977568bbd0a58e56">&#9670;&#160;</a></span>_switchcraftDoubleTapCountdown</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t SwitchAggregator::_switchcraftDoubleTapCountdown = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set on switchcraft event, then decremented each tick event until 0. </p>

</div>
</div>
<a id="a469f51068ca21307b6e9657c7af3f446" name="a469f51068ca21307b6e9657c7af3f446"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a469f51068ca21307b6e9657c7af3f446">&#9670;&#160;</a></span>_switchHistory</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCircularBuffer.html">CircularBuffer</a>&lt;<a class="el" href="structcs__switch__history__item__t.html">cs_switch_history_item_t</a>&gt; SwitchAggregator::_switchHistory</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Keep up a history of switch commands. </p>
<p >This can be commands from any source, user or automated. </p>

</div>
</div>
<a id="a0ffd9887b9d98c4d7f3484e634dfd352" name="a0ffd9887b9d98c4d7f3484e634dfd352"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ffd9887b9d98c4d7f3484e634dfd352">&#9670;&#160;</a></span>_twilightHandler</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTwilightHandler.html">TwilightHandler</a> SwitchAggregator::_twilightHandler</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ac12efacb742b69e63c135fa960d8bd86" name="ac12efacb742b69e63c135fa960d8bd86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac12efacb742b69e63c135fa960d8bd86">&#9670;&#160;</a></span>_twilightState</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::optional&lt;uint8_t&gt; SwitchAggregator::_twilightState = {}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>source/include/switch/<a class="el" href="cs__SwitchAggregator_8h_source.html">cs_SwitchAggregator.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classSwitchAggregator.html">SwitchAggregator</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
