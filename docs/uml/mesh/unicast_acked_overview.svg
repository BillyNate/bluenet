<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="530px" preserveAspectRatio="none" style="width:746px;height:530px;" version="1.1" viewBox="0 0 746 530" width="746px" zoomAndPan="magnify"><defs><filter height="300%" id="f1eqvzmh4llztl" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="42" x2="42" y1="38.2969" y2="490.3516"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="303" x2="303" y1="38.2969" y2="490.3516"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="602" x2="602" y1="38.2969" y2="490.3516"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="704" x2="704" y1="38.2969" y2="490.3516"/><rect fill="#FEFECE" filter="url(#f1eqvzmh4llztl)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="65" x="8" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="51" x="15" y="22.9951">UART 1</text><rect fill="#FEFECE" filter="url(#f1eqvzmh4llztl)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="65" x="8" y="489.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="51" x="15" y="509.3467">UART 1</text><rect fill="#FEFECE" filter="url(#f1eqvzmh4llztl)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="111" x="246" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="97" x="253" y="22.9951">Crownstone 1</text><rect fill="#FEFECE" filter="url(#f1eqvzmh4llztl)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="111" x="246" y="489.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="97" x="253" y="509.3467">Crownstone 1</text><rect fill="#FEFECE" filter="url(#f1eqvzmh4llztl)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="111" x="545" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="97" x="552" y="22.9951">Crownstone 2</text><rect fill="#FEFECE" filter="url(#f1eqvzmh4llztl)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="111" x="545" y="489.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="97" x="552" y="509.3467">Crownstone 2</text><rect fill="#FEFECE" filter="url(#f1eqvzmh4llztl)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="65" x="670" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="51" x="677" y="22.9951">UART 2</text><rect fill="#FEFECE" filter="url(#f1eqvzmh4llztl)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="65" x="670" y="489.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="51" x="677" y="509.3467">UART 2</text><polygon fill="#A80036" points="291.5,141.0938,301.5,145.0938,291.5,149.0938,295.5,145.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="42.5" x2="297.5" y1="145.0938" y2="145.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="237" x="49.5" y="64.3638">type = CTRL_CMD_MESH_COMMAND</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="49.5" y="79.4966">payload =</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="65.5" y="94.6294">targetIds = [2]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="65.5" y="109.7622">flags = unicast &amp; acked</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="65.5" y="124.895">type = CTRL_CMD_UART_MSG</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="69" x="65.5" y="140.0278">data = "hi"</text><polygon fill="#A80036" points="590.5,230.7578,600.5,234.7578,590.5,238.7578,594.5,234.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="303.5" x2="596.5" y1="234.7578" y2="234.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="189" x="310.5" y="169.1606">opcode = UNICAST_RELIABLE</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="275" x="310.5" y="184.2935">type = CS_MESH_MODEL_TYPE_CTRL_CMD</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="310.5" y="199.4263">payload =</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="220" x="326.5" y="214.5591">ctrl_cmd = CTRL_CMD_UART_MSG</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="69" x="326.5" y="229.6919">data = "hi"</text><polygon fill="#A80036" points="692.5,259.8906,702.5,263.8906,692.5,267.8906,696.5,263.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="602.5" x2="698.5" y1="263.8906" y2="263.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="609.5" y="258.8247">"hi"</text><polygon fill="#A80036" points="314.5,334.4219,304.5,338.4219,314.5,342.4219,310.5,338.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="308.5" x2="601.5" y1="338.4219" y2="338.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="320.5" y="287.9575">opcode = UNICAST_REPLY</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="320.5" y="303.0903">msg =</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="220" x="336.5" y="318.2231">ctrl_cmd = CTRL_CMD_UART_MSG</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="336.5" y="333.356">result_code = SUCCESS</text><polygon fill="#A80036" points="53.5,408.9531,43.5,412.9531,53.5,416.9531,49.5,412.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="47.5" x2="302.5" y1="412.9531" y2="412.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="59.5" y="362.4888">mesh_result =</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="75.5" y="377.6216">stone_id = 2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="220" x="75.5" y="392.7544">ctrl_cmd = CTRL_CMD_UART_MSG</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="75.5" y="407.8872">result_code = SUCCESS</text><polygon fill="#A80036" points="53.5,468.3516,43.5,472.3516,53.5,476.3516,49.5,472.3516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="47.5" x2="302.5" y1="472.3516" y2="472.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="59.5" y="437.02">mesh_ack_all =</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="220" x="75.5" y="452.1528">ctrl_cmd = CTRL_CMD_UART_MSG</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="75.5" y="467.2856">result_code = SUCCESS</text><!--MD5=[546fde3797eb9e6c2ed2b708e76bcec4]
@startuml
participant "UART 1"         as uart_a
participant "Crownstone 1"   as a
participant "Crownstone 2"   as b
participant "UART 2"         as uart_b

uart_a -> a : type = CTRL_CMD_MESH_COMMAND\npayload =\n    targetIds = [2]\n    flags = unicast & acked\n    type = CTRL_CMD_UART_MSG\n    data = "hi"
a -> b      : opcode = UNICAST_RELIABLE\ntype = CS_MESH_MODEL_TYPE_CTRL_CMD\npayload =\n    ctrl_cmd = CTRL_CMD_UART_MSG\n    data = "hi"
b -> uart_b : "hi"
b -> a      : opcode = UNICAST_REPLY\nmsg =\n    ctrl_cmd = CTRL_CMD_UART_MSG\n    result_code = SUCCESS
a -> uart_a : mesh_result =\n    stone_id = 2\n    ctrl_cmd = CTRL_CMD_UART_MSG\n    result_code = SUCCESS
a -> uart_a : mesh_ack_all =\n    ctrl_cmd = CTRL_CMD_UART_MSG\n    result_code = SUCCESS

@enduml

PlantUML version 1.2020.00(Sat Jan 11 13:30:53 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.15+10-Ubuntu-0ubuntu0.18.04.1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>